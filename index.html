\<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CASW Inventory Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <h2>CASW Equipment Inventory</h2>
    
    <form id="inventoryForm">
        <input type="text" id="serialNumber" placeholder="Serial Number" required>
        <input type="text" id="itemName" placeholder="Item Name" required>
        <input type="text" id="category" placeholder="Category" required>
        <select id="status">
            <option value="Available">Available</option>
            <option value="In Use">In Use</option>
        </select>
        <select id="site">
            <option value="PS 18">PS 18</option>
            <option value="Bronx River">Bronx River</option>
            <option value="Beacon">Beacon</option>
            <option value="Main Office">Main Office</option>
        </select>
        <button type="submit">Add Item</button>
    </form>

    <input type="text" id="searchBox" placeholder="Search..." onkeyup="searchItems()">
    
    <table>
        <thead>
            <tr>
                <th onclick="sortTable(0)">Serial Number</th>
                <th onclick="sortTable(1)">Name</th>
                <th onclick="sortTable(2)">Category</th>
                <th onclick="sortTable(3)">Status</th>
                <th onclick="sortTable(4)">Site</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="inventoryList"></tbody>
    </table>

    <script>
        let editingIndex = null;

        document.getElementById('inventoryForm').addEventListener('submit', function(event) {
            event.preventDefault();
            addItem();
        });

        function addItem() {
            const item = {
                serialNumber: document.getElementById('serialNumber').value.trim(),
                itemName: document.getElementById('itemName').value.trim(),
                category: document.getElementById('category').value.trim(),
                status: document.getElementById('status').value,
                site: document.getElementById('site').value
            };

            if (!item.serialNumber || !item.itemName || !item.category) {
                alert("Please fill all required fields.");
                return;
            }

            let inventory = JSON.parse(localStorage.getItem('inventory')) || [];

            if (editingIndex !== null) {
                inventory[editingIndex] = item;
                editingIndex = null;
            } else {
                inventory.push(item);
            }

            localStorage.setItem('inventory', JSON.stringify(inventory));
            document.getElementById('inventoryForm').reset();
            loadData();
        }

        function removeItem(index) {
            let inventory = JSON.parse(localStorage.getItem('inventory')) || [];
            inventory.splice(index, 1);
            localStorage.setItem('inventory', JSON.stringify(inventory));
            loadData();
        }

        function editItem(index) {
            let inventory = JSON.parse(localStorage.getItem('inventory')) || [];
            const item = inventory[index];

            document.getElementById('serialNumber').value = item.serialNumber;
            document.getElementById('itemName').value = item.itemName;
            document.getElementById('category').value = item.category;
            document.getElementById('status').value = item.status;
            document.getElementById('site').value = item.site;

            editingIndex = index;
        }

        function searchItems() {
            const filter = document.getElementById('searchBox').value.toLowerCase();
            const rows = document.getElementById('inventoryList').getElementsByTagName('tr');

            for (let row of rows) {
                row.style.display = row.innerText.toLowerCase().includes(filter) ? "" : "none";
            }
        }

        function sortTable(columnIndex) {
            let inventory = JSON.parse(localStorage.getItem('inventory')) || [];
            inventory.sort((a, b) => {
                const aVal = Object.values(a)[columnIndex].toLowerCase();
                const bVal = Object.values(b)[columnIndex].toLowerCase();
                return aVal.localeCompare(bVal);
            });
            localStorage.setItem('inventory', JSON.stringify(inventory));
            loadData();
        }

        function loadData() {
            const inventory = JSON.parse(localStorage.getItem('inventory')) || [];
            const table = document.getElementById('inventoryList');
            table.innerHTML = "";

            inventory.forEach((item, index) => {
                const row = table.insertRow();
                row.innerHTML = `
                    <td>${item.serialNumber}</td>
                    <td>${item.itemName}</td>
                    <td>${item.category}</td>
                    <td>${item.status}</td>
                    <td>${item.site}</td>
                    <td>
                        <button class='edit-btn' onclick="editItem(${index})">Edit</button>
                        <button class='remove-btn' onclick="removeItem(${index})">Remove</button>
                    </td>`;
            });
        }

        window.onload = loadData;
    </script>
</body>
</html>
