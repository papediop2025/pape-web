<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CASW Inventory Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
</head>
<body>
    <h2>CASW Equipment Inventory</h2>
    <form id="inventoryForm">
        <input type="text" id="serialNumber" placeholder="Serial Number" required>
        <input type="text" id="itemName" placeholder="Item Name" required>
        <input type="text" id="category" placeholder="Category" required>
        <select id="status">
            <option value="Available">Available</option>
            <option value="In Use">In Use</option>
        </select>
        <select id="site">
            <option value="PS 18">PS 18</option>
            <option value="Bronx River">Bronx River</option>
            <option value="Beacon">Beacon</option>
            <option value="Main Office">Main Office</option>
        </select>
        <button type="submit">Add Item</button>
    </form>
    <input type="text" id="searchBox" placeholder="Search..." onkeyup="searchItems()">
    <table>
        <thead>
            <tr>
                <th>Serial Number</th>
                <th>Name</th>
                <th>Category</th>
                <th>Status</th>
                <th>Site</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="inventoryList"></tbody>
    </table>
    <script>
        // Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyCseu-dRFd1Ufm0tSGKwSejBF4CObKSokM",
          authDomain: "casw-inventory.firebaseapp.com",
          projectId: "casw-inventory",
          storageBucket: "casw-inventory.firebasestorage.app",
          messagingSenderId: "310491267724",
          appId: "1:310491267724:web:504d91cb1af94265d931a9",
          measurementId: "G-4T78HQ3Y1G"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const inventoryRef = db.collection("inventory");

        document.getElementById('inventoryForm').addEventListener('submit', function(event) {
            event.preventDefault();
            addItem();
        });

        function addItem() {
            const serialNumber = document.getElementById('serialNumber').value;
            const name = document.getElementById('itemName').value;
            const category = document.getElementById('category').value;
            const status = document.getElementById('status').value;
            const site = document.getElementById('site').value;

            inventoryRef.add({
                serialNumber,
                name,
                category,
                status,
                site
            }).then(() => {
                document.getElementById('inventoryForm').reset();
            });
        }

        function loadData() {
            inventoryRef.onSnapshot(snapshot => {
                document.getElementById('inventoryList').innerHTML = "";
                snapshot.forEach(doc => {
                    const item = doc.data();
                    const row = document.createElement("tr");
                    row.innerHTML = `<td>${item.serialNumber}</td><td>${item.name}</td><td>${item.category}</td><td>${item.status}</td><td>${item.site}</td>
                        <td><button onclick="deleteItem('${doc.id}')">Remove</button></td>`;
                    document.getElementById('inventoryList').appendChild(row);
                });
            });
        }

        function deleteItem(id) {
            inventoryRef.doc(id).delete();
        }

        loadData();
    </script>
</body>
</html>
